<!DOCTYPE html>
<html>
<head>
  <title>Genesys SDK Context Test</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 12px;
    }
    h2 {
      margin-bottom: 8px;
    }
    .info {
      margin-bottom: 6px;
      font-size: 1.1em;
    }
    .label {
      font-weight: bold;
      color: #333;
    }
  </style>
</head>
<body>
  <h2>Genesys SDK Context Test Widget</h2>
  <div class="info"><span class="label">Conversation ID:</span> <span id="convId">Loading...</span></div>
  <div class="info"><span class="label">Host Origin:</span> <span id="hostOrigin">Loading...</span></div>
  <div class="info"><span class="label">Target Environment:</span> <span id="targetEnv">Loading...</span></div>
  <div id="status" style="margin-top: 20px; color: green; font-weight: bold;">Initializing SDK...</div>

  <script src="https://sdk-cdn.mypurecloud.com/client-apps/2.6.7/purecloud-client-app-sdk.js"></script>
  <script>
    // Helper to get query parameters
    function getQueryParam(param) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(param) || "null";
    }

    // Show initial values from query params (may come from Genesys environment)
    document.getElementById('convId').textContent = getQueryParam('conversationId');
    document.getElementById('hostOrigin').textContent = getQueryParam('gcHostOrigin');
    document.getElementById('targetEnv').textContent = getQueryParam('gcTargetEnv');

    // Initialize Genesys Client App SDK
    try {
      const app = new window.purecloud.apps.ClientApp();

      // If you want, you can do more SDK stuff here (e.g., subscribe to context events)

      document.getElementById('status').textContent = "✅ SDK Initialized successfully";
      document.getElementById('status').style.color = "green";
    } catch (e) {
      document.getElementById('status').textContent = "❌ SDK Initialization failed: " + e.message;
      document.getElementById('status').style.color = "red";
    }
  </script>
</body>
</html>
